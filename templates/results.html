<!--
File: results.html
Author: Maurice Vossen
Date: November 2021
-->


{% extends "base.html" %}
{% block content %}

<!-- search division -->
<div class="search-div">

    <!-- search form -->
    <form class="search-form" action="{{url_for('results')}}" method="POST">

        <h1 class="form-heading">Welcome to Citypop Central</h1>

        <label for="search-query" class="search-label">Search Songs</span></label>
        <p class="search-p">e.g. genre (citypop, funk, jazz), release year, artist, song, or album.</p>
        <input type="text" id="search-query" name="search-query" class="search-textbox" aria-label="Please enter a keyword in this textbox to search our songs database, this a required field" required>
        <input type="submit" value="search" class="search-button" title="Search" aria-label="Click this button to search in our songs database, make sure you have added at least one keyword to the search textbox"><br><br>

    </form>


    <!-- header latest songs -->
    {% if songs_cover %}
        <h3 id="random-songs-h3">Latest Songs</h3>
    {% endif %}

    <!-- show latest uploaded songs -->
    <div id="random-songs-div">

        {% for song_cover in songs_cover %}

            <div class="random-song">

                <a href="/youtube?link={{ song_cover.youtube }}" target="_blank" title="{{song_cover.artist_name}} - {{song_cover.song_name}}" aria-label="Click here to listen to this random song">

                    <img src="{{song_cover.album_image}}" alt="Album cover: {{song_cover.artist_name}} - {{song_cover.album_name}}">

                </a>

            </div>

        {% endfor %}

    </div>


    <!-- show number of results -->
    <div class="results-div">
        {{ number_of_results }}
    </div>


    <!-- show limited results -->
    <div class="number-results-div">
        {{ current_results }} 
   </div>


    <!-- search summary -->
    {% for song in songs %}
    <div class="search-results">

            {% set item = result_numbers[loop.index-1] %}

            <div class="song-title-bar">

                <a class="youtube-link" href="/youtube?link={{ song.youtube }}" target="_blank" title="Watch on YouTube"><i class="fab fa-youtube"></i>

                {{ item }}. {{ song.artist_name }} - {{ song.song_name }}</a>

                <i class="search-icon expand-info fas fa-question-circle" title="Expand for more information"></i>

                {% if session.user == song.uploaded_by %}
            
                <a href="/edit_song?editsong={{ song._id }}" title="Edit song"><i class="admin-icon fas fa-edit"></i></a>

                <i class="admin-icon delete-song-check fas fa-trash-alt" title="Delete song"></i>
                <a href="{{ url_for('delete_song', song_id=song._id) }}"><i class="delete-link fas fa-trash-alt" title="Confirm to delete song"></i></a>
    
                
            {% endif %}

            </div>
            
            <div class="album-image">
                
                <div class="image-frame">
                    <a href="{{ song.album_image }}" target="_blank">

                        <img src="{{ song.album_image }}" alt="Album cover: {{song.artist_name}} - {{song.album_name}}" title="Click here to see the album cover">
            
                    </a>
                    
                </div>

            </div>

            <div class="song-div">
      
                <div class="visible-info">

                    <div class="song-info-desc">
                        Artist Name :
                    </div>

                    <div class="song-info-value">
                        {{ song.artist_name }}
                    </div>

                    <div class="song-info-desc">
                        Song Name :
                    </div>

                    <div class="song-info-value">
                        {{ song.song_name }}
                    </div>

                    <div class="song-info-desc">
                        Genre :
                    </div>

                    <div class="song-info-value">
                        {{ song.genre }}
                    </div>

                    <div class="song-info-desc">
                        Release Year :
                    </div>

                    <div class="song-info-value">
                        {{ song.release_year }}
                    </div>

                    <div class="song-info-desc">
                        Album Name :
                    </div>

                    <div class="song-info-value">
                        {{ song.album_name }}
                    </div>

                </div>

                <div class="hidden-info">

                    <div class="song-info-desc">
                        Song Length :
                    </div>

                    <div class="song-info-value">
                        {{ song.song_length }}
                    </div>

                    <div class="song-info-desc">
                        Uploaded By :
                    </div>

                    <div class="song-info-value">
                       <a href="/userinfo?user={{ song.uploaded_by }}" title="View user profile">{{ song.uploaded_by }}</a>
                    </div>

                    <div class="song-info-desc">
                        Upload Date :
                    </div>

                    <div class="song-info-value">
                        {{ song.upload_date }}
                    </div>


                    {% if song.edit_date %}

                    <div class="song-info-desc">
                        Edit Date :
                    </div>

                    <div class="song-info-value">
                        {{ song.edit_date }}
                    </div>

                    {% endif %}

                </div>

            </div>

    </div>
    {% endfor %}


    <!-- pagination -->
    <div id="pagination-links">

        {% if previous_page_text or next_page_text%}

            <hr class="hr-pagination">

            <a href="{{ previous_page }}" title="Go to the previous results page"> {{ previous_page_text }} </a>

            <span id="separator"> {{ separator }} </span>

            <a href="{{ next_page }}" title="Go to the next results page"> {{ next_page_text }} </a>

        {% endif %}

    </div>


    <!-- footer -->
    <footer>

        <p id="about-citypop"><a href="{{url_for('about')}}">About Citypop Central</a></p>

        <span id="follow-socials">follow us on social media</span>
    
        <ul>
            <li><a href="https://www.twitter.com/" target="_blank" title="Go to our twitter page" aria-label="Go to our twitter page by clicking this link (opens in new tab)"><i class="fab fa-twitter"></i></a></li>
            <li><a href="https://www.pinterest.com/" target="_blank" title="Go to our pinterest page" aria-label="Go to our pinterest page by clicking this link (opens in new tab)"><i class="fab fa-pinterest"></i></a></li>
            <li><a href="https://www.facebook.com/" target="_blank" title="Go to our facebook page" aria-label="Go to our facebook page by clicking this link (opens in new tab)"><i class="fab fa-facebook"></i></a></li>
        </ul>
    
        <span id="copyright">Â© CityPop Central 2021</span>
    
     </footer>

</div>

{% endblock %}